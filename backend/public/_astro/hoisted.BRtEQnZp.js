(async function(){const u=document.getElementById("loading-state"),p=document.getElementById("error-state"),f=document.getElementById("package-content"),m=window.location.pathname.split("/");let i=m.pop()||m.pop();if(i==="index.html"&&(i=m.pop()),i==="view"&&(i=new URLSearchParams(window.location.search).get("id")),(!i||i==="packages")&&(i=new URLSearchParams(window.location.search).get("id")),!i){y();return}const v=`https://nex-9ujp.onrender.com/api/packages/${i}`;try{const e=await fetch(v);if(!e.ok)throw e.status===404&&console.error("Package not found"),new Error(`API Error ${e.status}`);const s=await e.json();g(s)}catch(e){console.error(e),y()}function y(){u.style.display="none",p.style.display="block"}function g(e){if(u.style.display="none",f.style.display="block",document.title=`${e.name} | nex`,document.getElementById("pkg-name").textContent=e.name,document.getElementById("pkg-version").textContent=`v${e.version}`,e.license){const t=document.getElementById("pkg-license");t.textContent=e.license,t.style.display="inline-block";const n=document.getElementById("license-info");n.style.display="flex",document.getElementById("meta-license").textContent=e.license}document.getElementById("pkg-desc").textContent=e.description||"No description provided.";const s=`nex run ${e.name.toLowerCase()}`;document.getElementById("qs-cmd-text").textContent=s,document.getElementById("qs-copy-btn").setAttribute("data-copy",s);const c=`nex install ${e.name.toLowerCase()}`;if(document.getElementById("install-cmd-text").textContent=c,document.getElementById("install-copy-btn").setAttribute("data-copy",c),document.getElementById("meta-version").textContent=e.version,e.author){const t=document.getElementById("author-info");t.style.display="flex";const n=document.getElementById("author-val");let o=typeof e.author=="string"?e.author:e.author.name,a=typeof e.author=="object"?e.author.github:null;a?n.innerHTML=`<a href="https://github.com/${a}" target="_blank" rel="noopener">${o||a}</a>`:n.textContent=o||"Unknown"}if(e.runtime){const t=document.getElementById("runtime-info");t.style.display="flex",document.getElementById("meta-runtime").textContent=`${e.runtime.type||""} ${e.runtime.version||""}`}if(e.keywords&&e.keywords.length>0){const t=document.getElementById("keywords-list");document.getElementById("keywords-section").style.display="block",e.keywords.forEach(n=>{const o=document.createElement("span");o.className="keyword-tag",o.textContent=n,t.appendChild(o)})}if(e.platforms&&e.platforms.length>0){const t=document.getElementById("platforms-list");document.getElementById("platforms-block").style.display="block",e.platforms.forEach(n=>{const o=document.createElement("span");o.className="platform-tag",o.textContent=n,t.appendChild(o)})}if(e.screenshots&&e.screenshots.length>0){document.getElementById("screenshots-section").style.display="block";const t=document.getElementById("screenshots-grid");e.screenshots.forEach(n=>{const o=document.createElement("figure");o.className="screenshot-item";const a=document.createElement("img");if(a.src=n.url,a.alt=n.caption||"Screenshot",a.loading="lazy",o.appendChild(a),n.caption){const d=document.createElement("figcaption");d.textContent=n.caption,o.appendChild(d)}t.appendChild(o)})}if(e.commands&&Object.keys(e.commands).length>0){document.getElementById("commands-section").style.display="block";const t=document.getElementById("commands-body");Object.entries(e.commands).forEach(([n,o])=>{const a=document.createElement("tr"),d=n==="default"?"":n;a.innerHTML=`<td><code>nex run ${e.name.toLowerCase()} ${d}</code></td>
                                <td><code class="cmd-value">${o}</code></td>`,t.appendChild(a)})}const l=document.getElementById("resource-links");if(e.repository){const t=document.createElement("a");if(t.href=e.repository,t.target="_blank",t.rel="noopener",t.className="resource-link",t.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg><span>Repository</span>',l.appendChild(t),e.repository.includes("github.com")){const n=document.createElement("a");n.href=e.repository.replace(/\.git$/,"")+"/issues",n.target="_blank",n.rel="noopener",n.className="resource-link",n.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><span>Issues</span>',l.appendChild(n)}}if(e.homepage){const t=document.createElement("a");t.href=e.homepage,t.target="_blank",t.rel="noopener",t.className="resource-link",t.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><span>Homepage</span>',l.appendChild(t)}if(e.funding){const t=document.createElement("a");t.href=e.funding,t.target="_blank",t.rel="noopener",t.className="sponsor-btn",t.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg><span>Sponsor</span>',l.appendChild(t)}const E=document.getElementById("versions-list"),h=e.versions||[{version:e.version,date:e.publishedAt,changelog:e.changelog}];h.length===0?document.getElementById("no-versions").style.display="block":h.forEach(t=>{const n=document.createElement("div");n.className="version-item",n.innerHTML=`
                      <div>
                        <div class="version-label">v${t.version}</div>
                        ${t.date?`<div class="version-date">${new Date(t.date).toLocaleDateString()}</div>`:""}
                        ${t.changelog?`<p class="version-notes">${t.changelog}</p>`:""}
                      </div>
                      <div class="version-actions">
                        <button class="copy-btn" data-copy="nex install ${e.name.toLowerCase()}@${t.version}" title="Copy install command">
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2"/>
                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                          </svg>
                        </button>
                      </div>`,E.appendChild(n)});const b=document.getElementById("dep-graph");let r=[];Array.isArray(e.dependencies)?r=e.dependencies:e.dependencies&&(r=Object.entries(e.dependencies).map(([t,n])=>({id:t,version:n}))),r.length===0?document.getElementById("no-deps").style.display="block":r.forEach(t=>{const n=document.createElement("div");n.className="dependency-node",n.innerHTML=`
                      <div class="dep-line"></div>
                      <div class="dep-card">
                        <div class="dep-name">${t.id||t.name}</div>
                        ${t.version?`<div class="dep-version">${t.version}</div>`:""}
                      </div>`,b.appendChild(n)})}document.querySelector(".package-tabs").addEventListener("click",e=>{if(e.target.classList.contains("tab")){const s=e.target.dataset.target;document.querySelectorAll(".tab").forEach(c=>c.classList.remove("active")),e.target.classList.add("active"),document.querySelectorAll(".tab-content").forEach(c=>c.style.display="none"),document.getElementById(`tab-${s}`).style.display="block"}}),document.addEventListener("click",e=>{const s=e.target.closest("button[data-copy]");if(s){const c=s.getAttribute("data-copy");navigator.clipboard.writeText(c).then(()=>{const l=s.innerHTML;s.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="text-green-500" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>',setTimeout(()=>s.innerHTML=l,2e3)})}})})();
